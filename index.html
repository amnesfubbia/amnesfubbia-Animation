<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>amnesfubbia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { background-color: #000; color: #fff; font-family: 'Inter', sans-serif; margin: 0; overflow-x: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* LOGO & SPLASH */
        #splashScreen { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .splash-content { display: flex; flex-direction: column; align-items: center; animation: splashScale 0.8s ease-out; }
        .splash-logo { width: 80px; height: 80px; margin-bottom: 2px; }
        .splash-name { font-size: 18px; font-weight: 700; color: #fff; letter-spacing: -0.5px; opacity: 0; animation: fadeIn 0.5s ease forwards; animation-delay: 0.4s; }
        .splash-footer { position: absolute; bottom: 40px; text-align: center; opacity: 0; animation: fadeIn 0.5s ease forwards; animation-delay: 0.8s; }
        .from-text { font-size: 12px; color: #8e8e8e; letter-spacing: 1px; margin-bottom: 5px; }
        .brand-text { font-size: 14px; font-weight: 700; letter-spacing: 2px; background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        @keyframes splashScale { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadeIn { to { opacity: 1; } }

        .profile-header { padding: 15px 15px 0 15px; background: #000; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .ig-logo-wrapper { display: flex; align-items: center; gap: 4px; position: relative; cursor: pointer; }
        .ig-logo { font-family: 'Inter', sans-serif; font-weight: 700; font-size: 19px; letter-spacing: -1px; }
        .dot-notify { width: 7px; height: 7px; background-color: #ff3b30; border-radius: 50%; display: inline-block; margin-left: 2px; }
        
        .profile-info { display: flex; align-items: center; gap: 28px; margin-bottom: 15px; }
        .profile-pic-container { position: relative; width: 78px; height: 78px; }
        .profile-pic-logo { width: 74px; height: 74px; border-radius: 50%; border: 1px solid #262626; overflow: hidden; display: flex; align-items: center; justify-content: center; background: #000; padding: 12px; }
        .profile-pic-logo img { width: 100%; height: 100%; object-fit: contain; border-radius: 50%; }
        .add-story-btn { position: absolute; bottom: 2px; right: 2px; width: 22px; height: 22px; background: #0095f6; border: 2.5px solid #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; color: #fff; z-index: 10; }

        .stats { display: flex; flex-grow: 1; justify-content: space-between; text-align: center; padding-right: 10px; }
        .stat-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; color: #8e8e8e; }
        .stat-val { font-weight: 700; font-size: 16px; color: #fff; line-height: 1; margin-bottom: 2px; }
        .stat-label { font-size: 13px; font-weight: 400; line-height: 1; }
        .stat-item.active-stat { color: #fff; }
        
        .bio { font-size: 13px; line-height: 1.4; margin-bottom: 15px; margin-top: -8px; }
        .bio-name-wrapper { display: flex; align-items: center; gap: 4px; margin-bottom: 2px; }
        .bio-name { font-weight: 700; font-size: 13px; display: inline-block; }

        .action-buttons { display: flex; gap: 6px; margin-bottom: 15px; }
        .btn-ig { flex: 1; background: #262626; border-radius: 8px; padding: 7px; font-size: 13px; font-weight: 600; text-align: center; cursor: pointer; color: #fff; }
        .btn-ig.active { background: #363636; }
        .btn-icon-sq { width: 34px; background: #262626; border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; }

        #filterBar { display: none; margin-bottom: 15px; }
        .pill-grid { display: grid; gap: 6px; }
        .pill { background: transparent; border: 1px solid #1c1c1c; color: #fff; padding: 7px 0; border-radius: 8px; font-size: 10px; font-weight: 800; text-transform: uppercase; text-align: center; cursor: pointer; }
        .pill.active-pill { border: 1px solid #fff; }
        
        .filter-dropdown { display: none; position: fixed; bottom: 0; left: 0; right: 0; background: #121212; border-radius: 20px 20px 0 0; z-index: 9500; max-height: 60vh; overflow-y: auto; border-top: 1px solid #333; padding-bottom: 20px; animation: slideUp 0.3s ease-out; overscroll-behavior: contain; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .sticky-reset { position: sticky; top: 0; background: #1c1c1c; z-index: 10; font-weight: 800 !important; color: #fff !important; border-bottom: 2px solid #333; }
        #filterOverlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 9400; }
        .filter-item { padding: 16px; font-size: 14px; text-align: center; border-bottom: 1px solid #262626; color: #eee; cursor: pointer; }

        .highlights-wrapper { padding: 0 15px 15px 15px; border-bottom: 1px solid #1c1c1c; }
        .highlights-container { display: flex; gap: 18px; overflow-x: auto; }
        .highlight-item { flex: 0 0 62px; text-align: center; cursor: pointer; }
        .highlight-circle { width: 62px; height: 62px; border-radius: 50%; border: 0.5px solid #333; margin-bottom: 5px; display: flex; align-items: center; justify-content: center; background: #000; transition: border 0.3s; overflow: hidden; }
        .highlight-item.active-hl .highlight-circle { border: 2px solid #fff; }
        .highlight-circle img { width: 100%; height: 100%; object-fit: cover; }
        
        .logo-small img { width: 75%; height: 75%; object-fit: contain; }
        
        .highlight-text { font-size: 11px; color: #fff; font-weight: 400; white-space: nowrap; }

        .tab-nav { display: flex; border-top: 1px solid #1c1c1c; }
        .tab-item { flex: 1; text-align: center; padding: 12px 0; color: #a8a8a8; cursor: pointer; font-size: 18px; }
        .tab-item.active { color: #fff; border-bottom: 1px solid #fff; }

        .movie-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1px; padding-bottom: 80px; }
        .post-card { position: relative; aspect-ratio: 2/3; background: #0a0a0a; overflow: hidden; cursor: pointer; }
        .post-card img { width: 100%; height: 100%; object-fit: cover; }
        .badge-rating { position: absolute; top: 6px; left: 6px; padding: 2px 5px; border-radius: 2px; font-size: 7px; font-weight: 900; z-index: 5; background: rgba(255,255,255,0.9); color: #000; }
        .badge-type { position: absolute; top: 6px; right: 6px; padding: 2px 5px; border-radius: 2px; font-size: 7px; font-weight: 900; z-index: 5; background: rgba(0,0,0,0.7); color: #fff; text-transform: uppercase; border: 0.5px solid rgba(255,255,255,0.3); }

        #searchOverlay { display: none; position: fixed; inset: 0; background: #000; z-index: 4500; overflow-y: auto; }
        .search-header { position: sticky; top: 0; background: #000; display: flex; align-items: center; padding: 10px 15px; gap: 10px; border-bottom: 1px solid #1c1c1c; z-index: 100; }
        .search-input-box { flex-grow: 1; background: #262626; border-radius: 10px; padding: 8px 12px; display: flex; align-items: center; position: relative; }
        .search-input-box input { background: transparent !important; border: none; outline: none; color: #fff !important; font-size: 14px; width: 100%; margin-left: 8px; }
        
        #smartSearchDropdown { position: absolute; top: 100%; left: 0; right: 0; background: #1a1a1a; border-radius: 0 0 10px 10px; border: 1px solid #333; border-top: none; display: none; z-index: 500; max-height: 300px; overflow-y: auto; }
        .smart-item { display: flex; align-items: center; padding: 10px; gap: 12px; border-bottom: 1px solid #262626; cursor: pointer; }
        .smart-item img { width: 35px; height: 50px; object-fit: cover; border-radius: 4px; }
        .smart-info { display: flex; flex-direction: column; }
        .smart-name { font-size: 13px; font-weight: 600; color: #fff; }
        .smart-meta { font-size: 11px; color: #8e8e8e; }

        .calendar-item { display: flex; align-items: center; gap: 15px; padding: 15px; border-bottom: 1px solid #1c1c1c; }
        .calendar-date { flex: 0 0 50px; text-align: center; background: #262626; border-radius: 8px; padding: 5px; }
        .calendar-date .day { font-size: 16px; font-weight: 700; color: #fff; }
        .calendar-date .month { font-size: 10px; text-transform: uppercase; color: #8e8e8e; }

        #backToTop { position: fixed; bottom: 85px; right: 20px; background: rgba(255,255,255,0.3); width: 42px; height: 42px; border-radius: 50%; display: none; align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); }

        .modal-player { display: none; position: fixed; inset: 0; z-index: 8000; background: #000; overflow-y: auto; }
        .carousel-track { display: flex; transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1); width: 100%; height: 100%; }
        .carousel-slide { 
            min-width: 100%; 
            height: 100%; 
            position: relative; 
            background: #000; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        .carousel-slide iframe { width: 100%; height: 100%; border: none; }
        .swipe-overlay { position: absolute; inset: 0; z-index: 10; background: transparent; }
        .interaction-icon { font-size: 24px; cursor: pointer; color: #fff; }
        .server-btn { width: 100%; padding: 12px 5px; border-radius: 8px; font-size: 8px; font-weight: 800; text-transform: uppercase; border: 1px solid #1c1c1c; text-align: center; cursor: pointer; background: #0a0a0a; color: #fff; }
        .server-btn.active-link { border: 2px solid #fff !important; }
        .dl-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-top: 15px; }
        .dl-link-btn { width: 100%; padding: 14px; border-radius: 12px; background: #000; color: #a1a1aa; font-size: 10px; font-weight: 800; text-transform: uppercase; text-align: center; border: 1px solid #1c1c1c; }
        
        .cast-wrapper { display: flex; overflow-x: auto; gap: 15px; padding: 15px 0; scrollbar-width: none; }
        .cast-item { flex: 0 0 65px; text-align: center; cursor: pointer; }
        .cast-img-border { 
            width: 64px; height: 64px; border-radius: 50%; padding: 2.5px; 
            background: linear-gradient(45deg, #f9ce34, #ee2a7b, #6228d7); 
            margin-bottom: 5px; 
        }
        .cast-img-border .inner-border { width: 100%; height: 100%; border-radius: 50%; border: 2px solid #000; overflow: hidden; background: #000; }
        .cast-img-border img { width: 100%; height: 100%; object-fit: cover; }
        .cast-name { font-size: 9px; font-weight: 500; color: #fff; line-height: 1.2; display: block; margin-top: 4px; }
        
        .ig-post-content { padding: 0 15px; margin-top: 5px; }
        .ig-likes-count { font-weight: 700; font-size: 13px; margin-bottom: 5px; display: block; }
        .ig-username { font-weight: 700; font-size: 13px; margin-right: 8px; }
        .ig-caption { font-size: 13px; line-height: 1.4; color: #efefef; }
        
        .toggle-btn { display: block; color: #a8a8a8; cursor: pointer; font-size: 13px; margin-top: 4px; font-weight: 500; }
        #mTranslateBtn { font-size: 11px; color: #fff; font-weight: 700; cursor: pointer; display: inline-block; }
        .ig-hashtags { color: #e0f1ff; display: block; margin-top: 10px; font-size: 13px; line-height: 1.5; }
        .ig-date { color: #a8a8a8; font-size: 11px; text-transform: uppercase; }
        
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: #000; border-top: 1px solid #1c1c1c; display: flex; justify-content: space-around; padding: 12px 0; z-index: 300; }
        .bottom-nav i { color: #a8a8a8; transition: color 0.3s; }
        .bottom-nav i.active-nav { color: #fff; }

        /* SIDEBAR / ABOUT MENU */
        #sideMenu { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 9000; display: none; padding: 40px 25px; overflow-y: auto; }
        .side-close { position: absolute; top: 20px; right: 20px; font-size: 24px; cursor: pointer; }
        .about-title { font-size: 22px; font-weight: 900; margin-bottom: 20px; border-left: 4px solid #fff; padding-left: 12px; }
        .about-content { font-size: 14px; line-height: 1.6; color: #ccc; }
        .about-feature { margin-top: 20px; background: #111; padding: 15px; border-radius: 12px; border: 1px solid #222; }
        .about-footer { margin-top: 40px; text-align: center; border-top: 1px solid #222; padding-top: 20px; font-size: 12px; color: #666; }

        /* === PERBAIKAN LANDSCAPE === */
        @media (orientation: landscape) and (max-height: 520px) {
            .modal-player {
                padding: 0 !important;
            }
            #modalScrollTop {
                max-width: none !important;
                height: 100vh !important;
                padding-bottom: 0 !important;
            }
            .carousel-track,
            .carousel-slide,
            .carousel-slide iframe {
                height: calc(100vh - 110px) !important;
            }
            .px-4 { padding-left: 8px !important; padding-right: 8px !important; }
            #castContainer,
            .ig-post-content,
            #seriesControl,
            .dl-grid,
            .server-list {
                display: none !important;
            }
            .carousel-slide + .px-4.py-3 {
                position: absolute;
                bottom: 8px;
                left: 0;
                right: 0;
                background: rgba(0,0,0,0.5);
                padding: 8px !important;
                z-index: 20;
            }
            .interaction-icon {
                font-size: 28px !important;
            }
        }

        @media (orientation: landscape) {
            .modal-player-header {
                justify-content: space-between !important;
            }
        }
    </style>
</head>
<body>

    <!-- Splash Screen -->
    <div id="splashScreen">
        <div class="splash-content">
            <img src="amnesfubbia.png" class="splash-logo" alt="Logo">
            <div class="splash-name">amnesfubbia</div>
        </div>
        <div class="splash-footer">
            <div class="from-text">from</div>
            <div class="brand-text">ANASTEAS</div>
        </div>
    </div>

    <!-- Side Menu / About -->
    <div id="sideMenu">
        <i class="fa-solid fa-xmark side-close" onclick="toggleSideMenu()"></i>
        <div class="about-title">About Amnesfubbia</div>
        <div class="about-content">
            amnesfubbia adalah platform katalog sinema digital yang dirancang untuk memberikan pengalaman eksplorasi film dan series tanpa batas.
        </div>
        <!-- ... (sisa about content sama seperti sebelumnya) ... -->
    </div>

    <div id="mainProfile" style="display: none;">
        <!-- Profile header, stats, bio, action buttons, highlights, tab-nav, feedGrid sama seperti sebelumnya -->
        <!-- ... (kode bagian profile sama) ... -->
    </div>

    <!-- Search Overlay -->
    <div id="searchOverlay">
        <!-- ... (sama) ... -->
    </div>

    <!-- Back to Top, Filter Overlay, Dropdowns -->
    <div id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'})"><i class="fa-solid fa-arrow-up"></i></div>
    <div id="filterOverlay" onclick="closeD()"></div>
    <div id="countryDropdown" class="filter-dropdown no-scrollbar"></div>
    <div id="genreDropdown" class="filter-dropdown no-scrollbar"></div>
    <div id="yearDropdown" class="filter-dropdown no-scrollbar"></div>

    <!-- MODAL PLAYER (bagian yang paling diubah) -->
    <div id="movieModal" class="modal-player">
        <div id="modalScrollTop" class="max-w-xl mx-auto pb-40">
            <div class="px-4 h-[54px] flex items-center justify-between border-b border-zinc-900 sticky top-0 bg-black z-50 modal-player-header">
                <div class="flex items-center gap-4">
                    <i class="fa-solid fa-chevron-left text-xl cursor-pointer" onclick="closeModal()"></i>
                    <div class="flex-grow text-center text-[14px] font-bold truncate px-8" id="mTitle"></div>
                </div>
                <i class="fa-solid fa-expand text-xl cursor-pointer" id="btnFullscreen" onclick="toggleFullscreen()"></i>
            </div>

            <div id="castContainer" class="cast-wrapper px-4 no-scrollbar"></div>

            <div class="relative overflow-hidden h-[45vh] md:h-[60vh] lg:h-[70vh]">
                <div class="swipe-overlay" id="swipeOverlay"></div>
                <div class="carousel-track" id="carouselTrack"></div>
                <div id="carouselDots" class="flex justify-center gap-2 py-3"></div>
            </div>

            <div class="px-4 py-3 flex justify-between items-center">
                <div class="flex gap-6">
                    <i id="btnLikeModal" class="interaction-icon"></i>
                    <i class="fa-regular fa-comment interaction-icon"></i>
                    <i class="fa-regular fa-paper-plane interaction-icon"></i>
                </div>
                <i id="btnBookModal" class="interaction-icon"></i>
            </div>

            <div class="ig-post-content">
                <!-- ... (likes, username, caption, hashtags, date, translate btn sama) ... -->
                <div id="seriesControl" class="hidden mt-6 p-4 bg-zinc-950 rounded-2xl border border-zinc-900"></div>
                <div id="serverList" class="grid grid-cols-3 gap-2 mt-6"></div>
                <div class="dl-grid">
                    <!-- ... (download buttons sama) ... -->
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Nav -->
    <nav class="bottom-nav">
        <!-- ... (sama) ... -->
    </nav>

    <script>
        // === Variabel & fungsi awal sama seperti sebelumnya ===
        const API_KEY = 'bfa7df5310c9974f62f26c6789a8c00d';
        let page = 1, loading = false, currentType = 'multi', /* ... */ abortController = null;

        // ... (fungsi onload, updateActiveNav, toggleSideMenu, backToHome, dll sama) ...

        function toggleFullscreen() {
            const modal = document.getElementById('movieModal');
            if (!document.fullscreenElement) {
                if (modal.requestFullscreen) modal.requestFullscreen();
                else if (modal.webkitRequestFullscreen) modal.webkitRequestFullscreen();
                else if (modal.msRequestFullscreen) modal.msRequestFullscreen();
            } else {
                if (document.exitFullscreen) document.exitFullscreen();
                else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
                else if (document.msExitFullscreen) document.msExitFullscreen();
            }
        }

        // ... (fungsi lainnya seperti initSmartSearch, openComingSoon, loadFeed, renderGrid, openModal, dll sama) ...

        function setupSwipe() { 
            const overlay = document.getElementById('swipeOverlay'); 
            overlay.addEventListener('touchstart', e => { startX = e.touches[0].clientX; }, {passive:true}); 
            overlay.addEventListener('touchend', e => { 
                let diff = startX - e.changedTouches[0].clientX; 
                const slides = document.querySelectorAll('.carousel-slide'); 
                if(Math.abs(diff) > 35 && slides.length > 1) {   // â† threshold dikurangi jadi 35
                    let oldIdx = currentIdx; 
                    if(diff > 0 && currentIdx < slides.length - 1) currentIdx++; 
                    else if(diff < 0 && currentIdx > 0) currentIdx--; 
                    document.getElementById('carouselTrack').style.transform = `translateX(-${currentIdx * 100}%)`; 
                    document.querySelectorAll('.dot').forEach((d, i) => { 
                        d.className = `dot w-1.5 h-1.5 rounded-full ${i===currentIdx?'bg-blue-500':'bg-zinc-700'}`; 
                    }); 
                    const oldVid = document.getElementById(`yt-\( {oldIdx}`), newVid = document.getElementById(`yt- \){currentIdx}`);
                    if(oldVid) try{oldVid.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');}catch(e){}
                    if(newVid) try{newVid.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');}catch(e){}
                } 
            }); 
        }

        // ... (sisa script seperti openModal, playVid, loadEpisodes, dll tetap sama) ...
    </script>
</body>
</html>
