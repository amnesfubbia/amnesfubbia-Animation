<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amnesfubbia - Animation Hub</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
body{background:#060606;color:#fff;font-family:'Inter',sans-serif}
.movie-card{transition:.3s;border-radius:8px;overflow:hidden;background:#111;cursor:pointer}
.movie-card:hover{transform:scale(1.05);border:1px solid #3b82f6}
.modal{display:none;position:fixed;inset:0;z-index:100;background:rgba(0,0,0,.95);overflow-y:auto}
.search-container{background:rgba(10,10,10,.95);backdrop-filter:blur(15px);border-bottom:1px solid rgba(255,255,255,.1)}
.scrollbar-hide::-webkit-scrollbar{display:none}
</style>
</head>

<body>

<nav class="fixed top-0 w-full z-50 search-container p-3">
<div class="container mx-auto space-y-2">
<div class="flex gap-2 items-center">
<span class="text-lg font-black text-blue-500 italic cursor-pointer" onclick="location.reload()">AMNESFUBBIA</span>
<input id="searchInput" placeholder="Cari animasi..." class="flex-1 bg-black p-2 rounded text-xs">
<button onclick="searchMovies()" class="bg-blue-600 px-4 py-2 rounded text-xs font-bold">CARI</button>
</div>

<div class="flex gap-2 overflow-x-auto scrollbar-hide">
<select id="yearFilter" onchange="loadMovies()" class="bg-black p-2 text-[10px]">
<option value="">Semua Tahun</option>
<script>
for(let y=2026;y>=1920;y--)document.write(`<option value="${y}">${y}</option>`);
</script>
</select>

<select id="countryFilter" onchange="loadMovies()" class="bg-black p-2 text-[10px]">
<option value="">Semua Negara</option>
<option value="ID">Indonesia ðŸ‡®ðŸ‡©</option>
<option value="JP">Jepang ðŸ‡¯ðŸ‡µ</option>
<option value="US">Amerika ðŸ‡ºðŸ‡¸</option>
<option value="KR">Korea ðŸ‡°ðŸ‡·</option>
<option value="FR">Prancis ðŸ‡«ðŸ‡·</option>
<option value="CN">China ðŸ‡¨ðŸ‡³</option>
</select>

<select id="typeFilter" onchange="loadMovies()" class="bg-black p-2 text-[10px] text-blue-400 font-bold">
<option value="">Semua Tipe</option>
<option value="short">Film Pendek / OVA</option>
<option value="movie">Film Panjang</option>
</select>
</div>
</div>
</nav>

<main class="container mx-auto pt-32 px-2 pb-10">
<div id="movieGrid" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2"></div>
</main>

<div id="movieModal" class="modal flex items-center justify-center p-2">
<div class="bg-[#0f0f0f] w-full max-w-4xl rounded-xl overflow-hidden relative">
<button onclick="closeModal()" class="absolute top-4 right-4 bg-blue-600 w-8 h-8 rounded-full">âœ•</button>
<div id="modalContent" class="flex flex-col md:flex-row"></div>
</div>
</div>

<script>
const API_KEY='bfa7df5310c9974f62f26c6789a8c00d';
const IMG='https://image.tmdb.org/t/p/w500';

async function loadMovies(){
movieGrid.innerHTML='<p class="col-span-full text-center py-20 italic">Memuat...</p>';
let url=`https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_genres=16&sort_by=popularity.desc`;

if(yearFilter.value) url+=`&primary_release_year=${yearFilter.value}`;

if(countryFilter.value){
url+=`&region=${countryFilter.value}`;
const lang={JP:'ja',ID:'id',KR:'ko',FR:'fr',CN:'zh'};
if(lang[countryFilter.value]) url+=`&with_original_language=${lang[countryFilter.value]}`;
}

if(typeFilter.value==='short') url+=`&with_runtime.lte=45`;
if(typeFilter.value==='movie') url+=`&with_runtime.gte=60`;

const res=await fetch(url);
const data=await res.json();
displayMovies(data.results);
}

function displayMovies(list){
movieGrid.innerHTML='';
if(!list||!list.length){
movieGrid.innerHTML='<p class="col-span-full text-center text-gray-500">Tidak ditemukan</p>';return;
}
list.forEach(m=>{
if(!m.poster_path) return;
movieGrid.innerHTML+=`
<div class="movie-card" onclick="showDetail(${m.id})">
<img src="${IMG+m.poster_path}" class="w-full aspect-[2/3] object-cover">
<div class="p-2">
<p class="text-[10px] font-bold truncate">${m.title}</p>
<p class="text-[9px] text-gray-500">${m.release_date?.slice(0,4)||'N/A'}</p>
</div>
</div>`;
});
}

async function searchMovies(){
if(!searchInput.value) return;
const res=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(searchInput.value)}`);
const data=await res.json();
displayMovies(data.results.filter(m=>m.genre_ids?.includes(16)));
}

async function showDetail(id){
const res=await fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}&append_to_response=videos`);
const m=await res.json();
const isShort=m.runtime&&m.runtime<=45;

const video=m.videos.results.find(v=>v.site==='YouTube');

modalContent.innerHTML=`
<img src="${IMG+m.poster_path}" class="md:w-1/3 object-cover">
<div class="md:w-2/3 p-6">
<h2 class="text-xl font-black text-blue-500 italic">${m.title}</h2>
<p class="text-[10px] text-gray-500 mb-4">${m.release_date} â€¢ ${m.runtime||'?'} menit</p>
<p class="text-[11px] mb-4">${m.overview||'Tidak ada deskripsi'}</p>

${isShort && video ? `
<div class="aspect-video mb-4">
<iframe class="w-full h-full" src="https://www.youtube.com/embed/${video.key}?autoplay=1"
allow="autoplay" allowfullscreen></iframe>
</div>
<p class="text-green-400 text-[10px] font-bold italic">
â–¶ SHORT FILM diputar langsung (tanpa trailer & download)
</p>
` : ''}

${!isShort ? `
${video?`
<iframe class="w-full aspect-video mb-4" src="https://www.youtube.com/embed/${video.key}" allowfullscreen></iframe>`:''}

<a href="https://vidsrc.to/embed/movie/${m.id}" target="_blank"
class="block bg-blue-600 py-3 rounded text-center font-black text-xs mb-2">STREAMING</a>

<div class="flex gap-2">
<a href="https://dl.vidsrc.vip/movie/${m.id}" target="_blank"
class="flex-1 bg-green-600 py-3 rounded text-center text-[10px] font-black">DOWNLOAD</a>
<a href="https://flashstream.cc/download/${m.id}" target="_blank"
class="flex-1 bg-white/10 py-3 rounded text-center text-[10px] font-black">MIRROR</a>
</div>
` : ''}

<p class="text-[9px] text-gray-500 italic mt-6">
Film pendek diputar dari video resmi kreator. Hak cipta milik pemilik aslinya.
</p>
</div>`;
movieModal.style.display='flex';
document.body.style.overflow='hidden';
}

function closeModal(){
movieModal.style.display='none';
document.body.style.overflow='auto';
}
window.onclick=e=>{if(e.target.id==='movieModal')closeModal();}
loadMovies();
</script>

</body>
</html>
