<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>amnesfubbia - Cinema Archive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* CSS LENGKAP - TIDAK DIRINGKAS */
        body { 
            background-color: #000; 
            color: #fff; 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            padding: 0;
            overflow-x: hidden; 
            touch-action: manipulation; 
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* SPLASH SCREEN STYLES */
        #splashScreen { 
            position: fixed; 
            inset: 0; 
            background: #000; 
            z-index: 9999; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
        }
        .splash-content { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            animation: splashScale 0.8s ease-out; 
        }
        .splash-logo { 
            width: 80px; 
            height: 80px; 
            margin-bottom: 2px; 
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.2));
        }
        .splash-name { 
            font-size: 18px; 
            font-weight: 700; 
            color: #fff; 
            letter-spacing: -0.5px; 
            opacity: 0; 
            animation: fadeIn 0.5s ease forwards; 
            animation-delay: 0.4s; 
        }
        .splash-footer { 
            position: absolute; 
            bottom: 40px; 
            text-align: center; 
            opacity: 0; 
            animation: fadeIn 0.5s ease forwards; 
            animation-delay: 0.8s; 
        }
        .brand-text { 
            font-size: 14px; 
            font-weight: 700; 
            letter-spacing: 2px; 
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }

        @keyframes splashScale { 
            from { transform: scale(0.9); opacity: 0; } 
            to { transform: scale(1); opacity: 1; } 
        }
        @keyframes fadeIn { 
            to { opacity: 1; } 
        }

        /* PROFILE SECTION STYLES */
        .profile-header { 
            padding: 15px 15px 0 15px; 
            background: #000; 
            border-bottom: 0.5px solid #1c1c1c;
        }
        .top-bar { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 15px; 
        }
        .ig-logo { 
            font-weight: 700; 
            font-size: 22px; 
            letter-spacing: -1px; 
            display: flex; 
            align-items: center; 
            gap: 4px;
        }
        .profile-pic-logo { 
            width: 78px; 
            height: 78px; 
            border-radius: 50%; 
            border: 1.5px solid #262626; 
            overflow: hidden; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background: #000; 
            padding: 12px; 
        }
        .profile-pic-logo img { 
            width: 100%; 
            height: 100%; 
            object-fit: contain; 
        }
        
        .stats { 
            display: flex; 
            flex-grow: 1; 
            justify-content: space-around; 
            text-align: center; 
            padding: 0 10px; 
        }
        .stat-val { 
            font-weight: 700; 
            font-size: 17px; 
            color: #fff; 
            display: block;
        }
        .stat-label { 
            font-size: 13px; 
            color: #8e8e8e; 
        }
        
        .bio { 
            padding: 0 15px; 
            margin-top: 12px; 
            margin-bottom: 15px; 
        }
        .bio-name { 
            font-weight: 700; 
            font-size: 15px; 
            display: flex; 
            align-items: center; 
            gap: 5px;
        }
        .bio-category { 
            color: #8e8e8e; 
            font-size: 14px;
        }
        .bio-text { 
            font-size: 14px; 
            line-height: 1.4;
        }

        .action-buttons { 
            display: flex; 
            gap: 8px; 
            padding: 0 15px 15px 15px;
        }
        .btn-ig { 
            flex: 1; 
            background: #262626; 
            border-radius: 8px; 
            padding: 8px; 
            font-size: 13px; 
            font-weight: 600; 
            text-align: center; 
            cursor: pointer; 
            transition: background 0.2s;
        }
        .btn-ig:active { background: #363636; }

        /* GRID CONTENT STYLES */
        .movie-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 1.5px; 
            padding-bottom: 100px; 
        }
        .post-card { 
            position: relative; 
            aspect-ratio: 1/1; 
            background: #0a0a0a; 
            overflow: hidden; 
        }
        .post-card img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }
        .post-overlay-icon { 
            position: absolute; 
            top: 8px; 
            right: 8px; 
            color: #fff; 
            font-size: 16px; 
            filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
        }

        /* LANDSCAPE MODE SYSTEM */
        .landscape-overlay { 
            display: none; 
            position: fixed; 
            inset: 0; 
            z-index: 11000; 
            background: #000; 
        }
        .landscape-active #mainVideoArea { 
            position: fixed !important; 
            inset: 0 !important; 
            width: 100vw !important; 
            height: 100vh !important; 
            z-index: 11500 !important; 
            background: #000; 
        }
        .landscape-active iframe { 
            width: 100% !important; 
            height: 100% !important; 
            border: none; 
        }

        .ls-controls { 
            position: absolute; 
            inset: 0; 
            background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, transparent 50%, rgba(0,0,0,0.8) 100%); 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between; 
            padding: 30px 50px; 
            opacity: 0; 
            transition: opacity 0.3s ease; 
            z-index: 12000; 
        }
        .ls-controls.visible { opacity: 1; }
        .ls-btn { 
            color: #fff; 
            cursor: pointer; 
            transition: transform 0.1s; 
        }
        .ls-btn:active { transform: scale(0.9); }

        /* LOCK SYSTEM */
        #lsLockOverlay { 
            position: fixed; 
            inset: 0; 
            z-index: 14000; 
            display: none; 
            background: transparent; 
        }
        .lock-btn-container { 
            position: absolute; 
            right: 35px; 
            top: 50%; 
            transform: translateY(-50%); 
            z-index: 15000; 
        }
        .ls-btn-lock { 
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            background: rgba(0,0,0,0.5); 
            backdrop-filter: blur(15px); 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border: 1px solid rgba(255,255,255,0.1); 
            color: #fff; 
            font-size: 24px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* GESTURE INDICATORS */
        .ls-indicator { 
            position: absolute; 
            top: 50%; 
            transform: translateY(-50%); 
            background: rgba(0,0,0,0.85); 
            color: #fff; 
            padding: 22px; 
            border-radius: 20px; 
            display: none; 
            flex-direction: column; 
            align-items: center; 
            gap: 15px; 
            z-index: 16000; 
            pointer-events: none; 
            min-width: 70px;
        }
        #brightIndicator { left: 50px; }
        #volumeIndicator { right: 120px; }
        .ls-bar-bg { 
            width: 5px; 
            height: 140px; 
            background: #333; 
            border-radius: 3px; 
            position: relative; 
        }
        .ls-bar-fill { 
            width: 100%; 
            position: absolute; 
            bottom: 0; 
            background: #fff; 
            border-radius: 3px; 
            transition: height 0.1s; 
        }

        /* MODAL SYSTEM STYLES */
        .modal-player { 
            display: none; 
            position: fixed; 
            inset: 0; 
            z-index: 8000; 
            background: #000; 
            overflow-y: auto; 
        }
        .modal-header-nav {
            position: sticky;
            top: 0;
            background: #000;
            z-index: 100;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            border-bottom: 0.5px solid #1c1c1c;
        }
        .carousel-track { 
            display: flex; 
            width: 100%; 
            height: 100%; 
        }
        .carousel-slide { 
            min-width: 100%; 
            aspect-ratio: 16/9; 
            background: #000; 
            position: relative; 
        }
        
        .server-btn { 
            padding: 14px; 
            border-radius: 10px; 
            font-size: 11px; 
            font-weight: 900; 
            border: 1px solid #262626; 
            background: #0a0a0a; 
            color: #fff; 
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .server-btn.active-link { 
            border: 2px solid #fff; 
            background: rgba(255,255,255,0.05); 
            box-shadow: 0 0 15px rgba(255,255,255,0.1);
        }

        /* BOTTOM NAVIGATION */
        .bottom-nav { 
            position: fixed; 
            bottom: 0; 
            width: 100%; 
            background: #000; 
            border-top: 0.5px solid #1c1c1c; 
            display: flex; 
            justify-content: space-around; 
            padding: 15px 0; 
            z-index: 500; 
        }
        .bottom-nav i { color: #a8a8a8; font-size: 24px; }
        .bottom-nav i.active-nav { color: #fff; }
        .nav-profile-pic {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            border: 1.5px solid #a8a8a8;
            overflow: hidden;
        }
        .nav-profile-pic img { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body>

    <div id="splashScreen">
        <div class="splash-content">
            <img src="amnesfubbia.png" class="splash-logo" alt="Logo">
            <div class="splash-name">amnesfubbia</div>
        </div>
        <div class="splash-footer">
            <div class="brand-text">ANASTEAS</div>
        </div>
    </div>

    <div id="landscapeOverlay" class="landscape-overlay">
        <div id="lsLockOverlay" onclick="flashLockIcon()"></div>
        
        <div id="brightIndicator" class="ls-indicator">
            <i class="fa-solid fa-sun text-xl"></i>
            <div class="ls-bar-bg"><div id="brightFill" class="ls-bar-fill"></div></div>
        </div>
        <div id="volumeIndicator" class="ls-indicator">
            <i class="fa-solid fa-volume-high text-xl"></i>
            <div class="ls-bar-bg"><div id="volumeFill" class="ls-bar-fill"></div></div>
        </div>

        <div class="lock-btn-container">
            <button class="ls-btn-lock" onclick="toggleLock(event)">
                <i id="lockIcon" class="fa-solid fa-lock-open"></i>
            </button>
        </div>

        <div class="ls-controls" id="lsUI" onclick="toggleLsUI()">
            <div class="flex justify-between items-center">
                <i class="fa-solid fa-arrow-left ls-btn text-2xl" onclick="exitLandscape()"></i>
                <div id="lsTitle" class="text-white font-bold truncate mx-6 text-base tracking-tight"></div>
                <div style="width:30px"></div>
            </div>

            <div class="flex justify-center items-center gap-20" onclick="event.stopPropagation()">
                <i class="fa-solid fa-backward-step ls-btn text-4xl" onclick="skipVideo(-10)"></i>
                <div id="lsBtnPlayContainer" class="w-24 h-24 flex items-center justify-center">
                    <i id="lsBtnPlay" class="fa-solid fa-pause ls-btn text-7xl" onclick="toggleLsPlay()"></i>
                </div>
                <i class="fa-solid fa-forward-step ls-btn text-4xl" onclick="skipVideo(10)"></i>
            </div>

            <div class="flex justify-between items-center">
                <i id="lsBtnMute" class="fa-solid fa-volume-high ls-btn text-2xl" onclick="toggleLsMute()"></i>
                <div class="flex flex-col items-center">
                    <span class="text-[10px] text-zinc-500 uppercase font-black tracking-[0.3em]">Amnesfubbia</span>
                    <span class="text-[8px] text-zinc-600 font-bold uppercase tracking-widest mt-1">Cinema Archive</span>
                </div>
                <i class="fa-solid fa-compress ls-btn text-2xl" onclick="exitLandscape()"></i>
            </div>
        </div>
    </div>

    <div id="mainProfile" style="display: none;">
        <header class="profile-header">
            <div class="top-bar">
                <div class="ig-logo">amnesfubbia <i class="fa-solid fa-chevron-down text-xs ml-1"></i></div>
                <div class="flex gap-6">
                    <i class="fa-regular fa-square-plus text-2xl"></i>
                    <i class="fa-solid fa-bars text-2xl"></i>
                </div>
            </div>

            <div class="flex items-center gap-5 mb-5">
                <div class="profile-pic-logo">
                    <img src="amnesfubbia.png" alt="Logo">
                </div>
                <div class="stats">
                    <div onclick="loadFeed('movie')">
                        <span class="stat-val">25.4k</span>
                        <span class="stat-label">movie</span>
                    </div>
                    <div onclick="loadFeed('tv')">
                        <span class="stat-val">8.2k</span>
                        <span class="stat-label">tv</span>
                    </div>
                    <div onclick="loadFeed('all')">
                        <span class="stat-val">1.1k</span>
                        <span class="stat-label">short</span>
                    </div>
                </div>
            </div>
        </header>

        <div class="bio">
            <div class="bio-name">amnesfubbia <i class="fa-solid fa-circle-check text-[#0095f6] text-[14px]"></i></div>
            <div class="bio-category">Digital Creator</div>
            <div class="bio-text mt-1">
                ðŸŽ¬ Discover, Watch, and Archive the world of cinema.<br>
                âœ¨ Curated collection for true cinephiles.<br>
                #cinematography #archive #amnesfubbia
            </div>
        </div>

        <div class="action-buttons">
            <div class="btn-ig" onclick="loadFeed()">Trending</div>
            <div class="btn-ig" onclick="openSearch()">Cari Konten</div>
            <div class="bg-[#262626] rounded-lg px-3 flex items-center justify-center">
                <i class="fa-solid fa-user-plus text-[12px]"></i>
            </div>
        </div>

        <main id="feedGrid" class="movie-grid"></main>
    </div>

    <div id="movieModal" class="modal-player">
        <div id="modalScrollTop" class="max-w-2xl mx-auto pb-32">
            <div class="modal-header-nav">
                <i class="fa-solid fa-chevron-left text-2xl" onclick="closeModal()"></i>
                <div class="flex-grow text-center font-bold text-base truncate px-10" id="mTitle"></div>
                <i class="fa-solid fa-ellipsis text-xl"></i>
            </div>

            <div id="mainVideoArea" class="relative overflow-hidden aspect-video bg-zinc-900">
                <div class="carousel-track" id="carouselTrack"></div>
            </div>

            <div class="px-5 py-5 flex justify-between items-center">
                <div class="flex gap-7 items-center">
                    <i class="fa-regular fa-heart text-2xl" id="likeBtn"></i>
                    <i class="fa-regular fa-comment text-2xl"></i>
                    <i class="fa-regular fa-paper-plane text-2xl"></i>
                    <div class="w-[0.5px] h-6 bg-zinc-800 mx-1"></div>
                    <i class="fa-solid fa-expand text-2xl text-zinc-400" onclick="enterLandscape()"></i>
                </div>
                <i class="fa-regular fa-bookmark text-2xl"></i>
            </div>

            <div class="px-5">
                <div class="flex items-center gap-2 mb-4">
                    <div class="flex -space-x-2">
                        <div class="w-5 h-5 rounded-full bg-zinc-700 border border-black"></div>
                        <div class="w-5 h-5 rounded-full bg-zinc-600 border border-black"></div>
                        <div class="w-5 h-5 rounded-full bg-zinc-500 border border-black"></div>
                    </div>
                    <span class="text-[13px] font-bold">Diterima oleh ribuan cinephile</span>
                </div>

                <div id="mDesc" class="text-[14px] text-zinc-300 leading-relaxed mb-10"></div>
                
                <h3 class="text-[11px] font-black uppercase text-zinc-500 mb-4 tracking-[0.2em] flex items-center gap-2">
                    <span class="w-8 h-[1px] bg-zinc-800"></span> Pilih Server Stream
                </h3>
                
                <div id="serverList" class="grid grid-cols-2 gap-3 mb-10">
                    </div>
                
                <div class="p-5 rounded-xl bg-zinc-950 border border-zinc-900 text-center mb-10">
                    <p class="text-zinc-500 text-[11px] italic">Gunakan koneksi stabil untuk pengalaman menonton archive yang maksimal.</p>
                </div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <i class="fa-solid fa-house active-nav" onclick="location.reload()"></i>
        <i class="fa-solid fa-magnifying-glass" onclick="openSearch()"></i>
        <i class="fa-solid fa-clapperboard"></i>
        <i class="fa-regular fa-heart"></i>
        <div class="nav-profile-pic">
            <img src="amnesfubbia.png" alt="User">
        </div>
    </nav>

    <script>
        /* JAVASCRIPT LENGKAP - TIDAK DIRINGKAS */
        const API_KEY = 'bfa7df5310c9974f62f26c6789a8c00d';
        let isLocked = false;
        let lsControlTimer;
        let touchStartY = 0;
        let currentBrightness = 100;
        let currentVolume = 70;

        window.onload = () => {
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                document.getElementById('mainProfile').style.display = 'block';
                loadFeed();
            }, 2000);
            setupLandscapeGestures();
        };

        async function loadFeed(type = 'all') {
            const grid = document.getElementById('feedGrid');
            grid.innerHTML = '<div class="col-span-3 py-40 text-center"><i class="fa-solid fa-circle-notch fa-spin text-2xl text-zinc-800"></i></div>';
            
            const url = type === 'all' ? 
                `https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}&language=id-ID` :
                `https://api.themoviedb.org/3/discover/${type}?api_key=${API_KEY}&language=id-ID&sort_by=popularity.desc`;
            
            try {
                const res = await fetch(url);
                const data = await res.json();
                grid.innerHTML = data.results.map(m => `
                    <div class="post-card" onclick="openModal(${m.id}, '${m.media_type || (type === 'all' ? 'movie' : type)}')">
                        <img src="https://image.tmdb.org/t/p/w342${m.poster_path}" loading="lazy">
                        ${(m.media_type === 'tv' || type === 'tv') ? '<i class="fa-solid fa-layer-group post-overlay-icon"></i>' : '<i class="fa-solid fa-play post-overlay-icon"></i>'}
                    </div>
                `).join('');
            } catch (e) { 
                grid.innerHTML = '<div class="col-span-3 py-40 text-center text-zinc-600">Terjadi kesalahan saat memuat archive.</div>'; 
            }
        }

        async function openModal(id, type) {
            window.currentMediaId = id;
            window.currentMediaType = type;
            const modal = document.getElementById('movieModal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            const res = await fetch(`https://api.themoviedb.org/3/${type}/${id}?api_key=${API_KEY}&language=id-ID&append_to_response=videos`);
            const data = await res.json();
            
            document.getElementById('mTitle').innerText = data.title || data.name;
            document.getElementById('mDesc').innerHTML = `<span class="font-bold text-white mr-2">amnesfubbia</span>${data.overview || "Sinopsis archive tidak tersedia untuk judul ini."}`;
            
            const trailer = data.videos.results.find(v => v.type === 'Trailer');
            const videoUrl = trailer ? `https://www.youtube.com/embed/${trailer.key}?enablejsapi=1&autoplay=0&controls=0&modestbranding=1&rel=0` : `https://vidsrc.me/embed/${type}?tmdb=${id}`;
            
            document.getElementById('carouselTrack').innerHTML = `
                <div class="carousel-slide">
                    <iframe id="playerFrame" src="${videoUrl}" class="w-full h-full" allow="autoplay; fullscreen" allowfullscreen></iframe>
                </div>`;
            
            const servers = [
                { name: "Server Utama", url: `https://vidsrc.me/embed/${type}?tmdb=${id}` },
                { name: "Server VIP", url: `https://vidsrc.to/embed/${type}/${id}` },
                { name: "Server HD", url: `https://embed.su/embed/${type}/${id}` },
                { name: "Server Alternative", url: `https://multiembed.mov/directstream.php?video_id=${id}&tmdb=1` }
            ];

            document.getElementById('serverList').innerHTML = servers.map(s => `
                <button class="server-btn" onclick="playVid('${s.url}', this)">${s.name}</button>
            `).join('');
        }

        function playVid(url, el) {
            document.getElementById('carouselTrack').innerHTML = `
                <div class="carousel-slide">
                    <iframe id="playerFrame" src="${url}" class="w-full h-full" allow="autoplay; fullscreen" allowfullscreen></iframe>
                </div>`;
            document.querySelectorAll('.server-btn').forEach(b => b.classList.remove('active-link'));
            el.classList.add('active-link');
        }

        function closeModal() {
            document.getElementById('movieModal').style.display = 'none';
            document.getElementById('carouselTrack').innerHTML = '';
            document.body.style.overflow = 'auto';
        }

        /* LANDSCAPE SYSTEM FUNCTIONS LENGKAP */

        async function enterLandscape() {
            const overlay = document.getElementById('landscapeOverlay');
            const videoArea = document.getElementById('mainVideoArea');
            document.getElementById('lsTitle').innerText = document.getElementById('mTitle').innerText;
            
            document.body.classList.add('landscape-active');
            overlay.style.display = 'block';
            overlay.appendChild(videoArea);

            showLsUI();
            try {
                if (document.documentElement.requestFullscreen) {
                    await document.documentElement.requestFullscreen();
                    if (screen.orientation && screen.orientation.lock) {
                        await screen.orientation.lock('landscape').catch(() => {});
                    }
                }
            } catch (e) {
                console.log("Fullscreen/Lock orientation blocked.");
            }
        }

        function exitLandscape() {
            if(isLocked) return;
            const overlay = document.getElementById('landscapeOverlay');
            const videoArea = document.getElementById('mainVideoArea');
            const modalScroll = document.getElementById('modalScrollTop');
            const desc = document.getElementById('mDesc');

            document.body.classList.remove('landscape-active');
            overlay.style.display = 'none';
            modalScroll.insertBefore(videoArea, desc.previousElementSibling.previousElementSibling);

            if (document.exitFullscreen && document.fullscreenElement) {
                document.exitFullscreen();
            }
            if (screen.orientation && screen.orientation.unlock) {
                screen.orientation.unlock();
            }
        }

        function toggleLock(e) {
            e.stopPropagation();
            isLocked = !isLocked;
            const icon = document.getElementById('lockIcon');
            const lockOverlay = document.getElementById('lsLockOverlay');
            const ui = document.getElementById('lsUI');

            if(isLocked) {
                icon.className = "fa-solid fa-lock text-red-500";
                lockOverlay.style.display = 'block';
                ui.classList.remove('visible');
            } else {
                icon.className = "fa-solid fa-lock-open text-white";
                lockOverlay.style.display = 'none';
                showLsUI();
            }
        }

        function flashLockIcon() {
            const btn = document.querySelector('.ls-btn-lock');
            btn.style.transform = 'translateY(-50%) scale(1.4)';
            setTimeout(() => {
                btn.style.transform = 'translateY(-50%) scale(1)';
            }, 250);
        }

        function toggleLsUI() {
            if(isLocked) return;
            const ui = document.getElementById('lsUI');
            if(ui.classList.contains('visible')) {
                ui.classList.remove('visible');
            } else {
                showLsUI();
            }
        }

        function showLsUI() {
            const ui = document.getElementById('lsUI');
            ui.classList.add('visible');
            clearTimeout(lsControlTimer);
            lsControlTimer = setTimeout(() => {
                if(!isLocked) ui.classList.remove('visible');
            }, 4500);
        }

        function toggleLsPlay() {
            const frame = document.getElementById('playerFrame');
            const btn = document.getElementById('lsBtnPlay');
            const isPaused = btn.classList.contains('fa-play');
            
            const cmd = isPaused ? 'playVideo' : 'pauseVideo';
            frame.contentWindow.postMessage(JSON.stringify({"event":"command","func":cmd,"args":""}), '*');
            
            btn.className = isPaused ? 'fa-solid fa-pause ls-btn text-7xl' : 'fa-solid fa-play ls-btn text-7xl';
        }

        function toggleLsMute() {
            const frame = document.getElementById('playerFrame');
            const btn = document.getElementById('lsBtnMute');
            const isMuted = btn.classList.contains('fa-volume-xmark');
            
            const cmd = isMuted ? 'unMute' : 'mute';
            frame.contentWindow.postMessage(JSON.stringify({"event":"command","func":cmd,"args":""}), '*');
            
            btn.className = isMuted ? 'fa-solid fa-volume-high ls-btn text-2xl' : 'fa-solid fa-volume-xmark ls-btn text-2xl';
        }

        function skipVideo(sec) {
            const frame = document.getElementById('playerFrame');
            frame.contentWindow.postMessage(JSON.stringify({"event":"command","func":"seekTo","args":[sec, true]}), '*');
        }

        function setupLandscapeGestures() {
            const overlay = document.getElementById('landscapeOverlay');
            
            overlay.addEventListener('touchstart', e => {
                if(isLocked) return;
                touchStartY = e.touches[0].clientY;
            }, {passive: true});

            overlay.addEventListener('touchmove', e => {
                if(isLocked) return;
                const touchY = e.touches[0].clientY;
                const touchX = e.touches[0].clientX;
                const deltaY = (touchStartY - touchY) * 0.6;
                const screenWidth = window.innerWidth;

                if (touchX < screenWidth / 2) {
                    currentBrightness = Math.min(Math.max(currentBrightness + deltaY, 10), 100);
                    document.getElementById('mainVideoArea').style.filter = `brightness(${currentBrightness}%)`;
                    showIndicator('bright', currentBrightness);
                } else {
                    currentVolume = Math.min(Math.max(currentVolume + deltaY, 0), 100);
                    const frame = document.getElementById('playerFrame');
                    frame.contentWindow.postMessage(JSON.stringify({"event":"command","func":"setVolume","args":[currentVolume]}), '*');
                    showIndicator('volume', currentVolume);
                }
                touchStartY = touchY;
            }, {passive: true});

            overlay.addEventListener('touchend', () => {
                setTimeout(() => {
                    document.getElementById('brightIndicator').style.display = 'none';
                    document.getElementById('volumeIndicator').style.display = 'none';
                }, 1000);
            });
        }

        function showIndicator(type, val) {
            const ind = document.getElementById(type + 'Indicator');
            const fill = document.getElementById(type + 'Fill');
            ind.style.display = 'flex';
            fill.style.height = val + '%';
        }

        function openSearch() {
            alert('Fitur pencarian cinema archive akan segera hadir.');
        }
    </script>
</body>
</html>
